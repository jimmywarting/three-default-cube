(this["webpackJsonpgame-starter"]=this["webpackJsonpgame-starter"]||[]).push([[0],{22:function(e,t,r){e.exports=r.p+"static/media/character.e1ab850e.glb"},45:function(e,t,r){e.exports=r.p+"static/media/demo-basic.fbbe52fa.glb"},49:function(e,t,r){e.exports=r(87)},78:function(e,t,r){e.exports=r.p+"static/media/demo-actions-and-ui.6235c1a6.glb"},79:function(e,t,r){e.exports=r.p+"static/media/demo-game-objects.7e1b2b59.glb"},80:function(e,t,r){e.exports=r.p+"static/media/demo-persistence.146d3590.glb"},81:function(e,t,r){e.exports=r.p+"static/media/demo-physics.79823df6.glb"},82:function(e,t,r){e.exports=r.p+"static/media/spinner-default.9d266d9a.png"},83:function(e,t,r){e.exports=r.p+"static/media/font.3ed9575d.ttf"},84:function(e,t,r){e.exports=r.p+"static/media/intro.56f385dd.glb"},87:function(e,t,r){"use strict";r.r(t);var n=r(9),a=r.n(n),i=r(14),s=r(2),c=r(15),o=r(1),u=r(5),l=r(3),v=r(4),p=r(0),m=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onCreate",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),n=s.AssetsService.getAmbientLight(16777164,255,7),t.add(n),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(45)),s.AssetsService.getModel(r(22))],onComplete:function(e){var r=Object(c.a)(e,2),n=r[0],a=r[1];s.SceneService.parseScene({target:n,gameObjects:{player:function(e){Object(s.replacePlaceholder)(e,a);var t=new s.AnimationWrapper(a);t.playAnimation("idle");var r=new s.PhysicsWrapper(e);r.enableNavmaps();var n=0;s.TimeService.registerFrameListener((function(){var a=s.InputService.keys.w,i=s.InputService.keys.s,c=s.InputService.keys.a,o=s.InputService.keys.d,u=s.MathService.getVec3(0,0,0);if(a&&(u.z-=1),i&&(u.z+=1),c&&(u.x-=1),o&&(u.x+=1),u.length()>0){n=p.MathUtils.lerp(n,.04,.2);var l=s.MathService.getVec3(0,0,0),v=s.UtilsService.getEmpty();e.getWorldPosition(l).sub(u),v.position.copy(e.position),v.quaternion.copy(e.quaternion),v.lookAt(l),e.quaternion.slerp(v.quaternion,.2),s.MathService.releaseVec3(l),s.UtilsService.releaseEmpty(v)}else n=p.MathUtils.lerp(n,0,.2);u.normalize().multiplyScalar(n),r.setSimpleVelocity(u),t.blendInAnimation("run",25*n),s.MathService.releaseVec3(u)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(n)}})}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.ViewClass),S=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onCreate",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),n=s.AssetsService.getAmbientLight(16777164,255,7),t.add(n),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(45)),s.AssetsService.getModel(r(22))],onComplete:function(e){var r=Object(c.a)(e,2),n=r[0],a=r[1];s.SceneService.parseScene({target:n,gameObjects:{player:function(e){Object(s.replacePlaceholder)(e,a);var t=new s.AnimationWrapper(a);t.playAnimation("idle");var r=new s.PhysicsWrapper(e);r.enableNavmaps();var n=0;s.CameraService.follow(e),s.CameraService.followPivotPosition.set(0,2,2),s.TimeService.registerFrameListener((function(){var a=s.InputService.keys.w,i=s.InputService.keys.s,c=s.InputService.keys.a,o=s.InputService.keys.d;c&&(e.rotation.y-=.025),o&&(e.rotation.y+=.025),n=a?p.MathUtils.lerp(n,-.04,.2):i?p.MathUtils.lerp(n,.02,.2):p.MathUtils.lerp(n,0,.2);var u=s.MathService.getVec3();e.getWorldDirection(u),u.multiplyScalar(n),r.setSimpleVelocity(u),t.blendInAnimation("run",25*Math.abs(n)),s.MathService.releaseVec3(u)}))}},onCreate:function(){t.add(n)}})}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.ViewClass),d=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onCreate",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),n=s.AssetsService.getAmbientLight(16777164,255,7),t.add(n),s.VarService.setVar("count",0),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(78))],onComplete:function(e){var r=Object(c.a)(e,1)[0];s.SceneService.parseScene({target:r,actions:{increment:function(e){s.VarService.setVar("count",Math.min(s.VarService.getVar("count")+1,10)),e.material.emissiveIntensity=1,e.scale.setScalar(1.1)},decrement:function(e){s.VarService.setVar("count",Math.max(0,s.VarService.getVar("count")-1)),e.material.emissiveIntensity=1,e.scale.setScalar(1.1)}},gameObjects:{actionButton:function(e){var t=e.material;t.emissiveIntensity=0,t.emissive=new p.Color(16777164),s.TimeService.registerFrameListener((function(){t.emissiveIntensity=p.MathUtils.lerp(t.emissiveIntensity,0,.1);var r=s.MathService.getVec3(1,1,1);e.scale.lerp(r,.1),s.MathService.releaseVec3(r)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(r)}})}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.ViewClass),h=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onCreate",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),n=s.AssetsService.getAmbientLight(16777164,255,7),t.add(n),new s.Preloader({requireAssets:[s.AssetsService.preloadModel(r(22))],onComplete:function(){!function e(){s.AssetsService.getModel(r(22)).then((function(e){s.SceneService.parseScene({target:e,onCreate:function(){e.position.x=p.MathUtils.randFloat(-5,5),e.position.y-=1.5,e.position.z-=15+p.MathUtils.randFloat(0,10),e.rotation.y=p.MathUtils.randFloat(-s.mathPi4,s.mathPi4),t.add(e),setTimeout((function(){s.AssetsService.disposeAsset(e)}),3e3+500*Math.random())}})})),setTimeout((function(){e()}),1e3+500*Math.random())}()}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.ViewClass),f=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onCreate",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),n=s.AssetsService.getAmbientLight(16777164,255,7),t.add(n),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(79))],onComplete:function(e){var r=Object(c.a)(e,1)[0];s.SceneService.parseScene({target:r,gameObjects:{cubeRed:function(e){s.TimeService.registerFrameListener((function(t){var r=t.elapsedTime;e.rotation.x+=.1*Math.sin(r)}))},cubeGreen:function(e){s.TimeService.registerFrameListener((function(t){var r=t.elapsedTime;e.position.y=.5*Math.sin(r),e.rotation.x=-.4*Math.sin(r)}))},cubeBlue:function(e){s.TimeService.registerFrameListener((function(t){var r=t.elapsedTime,n=s.MathService.getVec3(1,1,1).multiplyScalar(.1*Math.sin(r)+1);e.scale.copy(n),s.MathService.releaseVec3(n)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(r)}})}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.ViewClass),g=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onCreate",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.RenderService.getScene(),n=s.AssetsService.getAmbientLight(16777164,255,7),t.add(n),e.next=5,s.VarService.registerPersistentVar("viewCount",0);case 5:s.VarService.setVar("viewCount",s.VarService.getVar("viewCount")+1),1===s.VarService.getVar("viewCount")?s.VarService.setVar("views","You saw this page 1 time"):s.VarService.getVar("viewCount")>1&&s.VarService.getVar("viewCount")<10?s.VarService.setVar("views","You saw this page ".concat(s.VarService.getVar("viewCount")," times")):s.VarService.setVar("views","You saw this page plenty of times"),new s.Preloader({spinnerTexture:s.GameInfoService.config.textures.spinner,requireAssets:[s.AssetsService.getModel(r(80))],onComplete:function(e){var r=Object(c.a)(e,1)[0];s.SceneService.parseScene({target:r,gameObjects:{},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(r)}})}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.ViewClass),w=function(){function e(t){Object(o.a)(this,e),this.target=null,this.snowCanvas=null,this.snowTexture=null,this.snowProps={textureSize:64,textureColor:"#999999",snowOffset:2,snowDisplacement:.1},this.target=t,this.onCreate()}return Object(u.a)(e,[{key:"onCreate",value:function(){this.target.material&&s.AssetsService.disposeProps(this.target.material),this.snowCanvas=document.createElement("canvas"),this.snowCanvas.width=this.snowProps.textureSize,this.snowCanvas.height=this.snowProps.textureSize;var e=this.snowCanvas.getContext("2d");e.fillStyle="#000000",e.fillRect(0,0,this.snowCanvas.width,this.snowCanvas.height),e.globalCompositeOperation="screen",this.snowTexture=new p.CanvasTexture(this.snowCanvas),s.AssetsService.registerDisposable(this.snowTexture),this.target.material=new p.MeshPhongMaterial({color:16777215,side:p.DoubleSide,displacementMap:this.snowTexture,displacementScale:-this.snowProps.snowDisplacement,metalness:.5,roughness:.5,emissive:new p.Color(16777215),emissiveIntensity:.3}),s.AssetsService.registerDisposable(this.target.material)}},{key:"onInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hit,r=t.uv,n=this.snowTexture.image;if(r&&n){this.snowTexture.transformUv(r);var a=n.getContext("2d"),i=r.x*this.snowProps.textureSize-this.snowProps.snowOffset/2,s=r.y*this.snowProps.textureSize-this.snowProps.snowOffset/2;a.fillStyle="#ffffff",a.fillRect(i,s,this.snowProps.snowOffset,this.snowProps.snowOffset),this.snowTexture.needsUpdate=!0}}},{key:"dispose",value:function(){this.target&&delete this.target,this.snowTexture&&delete this.snowTexture,delete this.snowCanvas,this.snowCanvas=null,delete this.snowProps}}]),e}(),b=function(e){Object(l.a)(n,e);var t=Object(v.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onCreate",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),n=s.AssetsService.getAmbientLight(16777164,255,7),t.add(n),s.PhysicsService.registerSurfaceHandler("snow",w,"onInteraction"),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(81)),s.AssetsService.getModel(r(22))],onComplete:function(e){var r=Object(c.a)(e,2),n=r[0],a=r[1];s.SceneService.parseScene({target:n,gameObjects:{player:function(e){Object(s.replacePlaceholder)(e,a);var t=new s.AnimationWrapper(a);t.playAnimation("idle");var r=new s.PhysicsWrapper(e);r.enableNavmaps();var n=0;s.TimeService.registerFrameListener((function(){var a=s.InputService.keys.w,i=s.InputService.keys.s,c=s.InputService.keys.a,o=s.InputService.keys.d,u=s.MathService.getVec3(0,0,0);if(a&&(u.z-=1),i&&(u.z+=1),c&&(u.x-=1),o&&(u.x+=1),u.length()>0){n=p.MathUtils.lerp(n,.04,.2);var l=s.MathService.getVec3(0,0,0),v=s.UtilsService.getEmpty();e.getWorldPosition(l).sub(u),v.position.copy(e.position),v.quaternion.copy(e.quaternion),v.lookAt(l),e.quaternion.slerp(v.quaternion,.2),s.MathService.releaseVec3(l),s.UtilsService.releaseEmpty(v)}else n=p.MathUtils.lerp(n,0,.2);u.normalize().multiplyScalar(n),r.setSimpleVelocity(u),t.blendInAnimation("run",25*n),s.MathService.releaseVec3(u)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(n)}})}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.ViewClass),y=Object.fromEntries(new URLSearchParams(window.location.search).entries()).demoId;s.DummyDebug.on(s.DebugFlags.DEBUG_ENABLE),"debugging"===y&&(s.DummyDebug.on(s.DebugFlags.DEBUG_LIVE),s.DummyDebug.on(s.DebugFlags.DEBUG_LOG_ASSETS),s.DummyDebug.on(s.DebugFlags.DEBUG_LOG_MEMORY),s.DummyDebug.on(s.DebugFlags.DEBUG_LOG_POOLS),s.DummyDebug.on(s.DebugFlags.DEBUG_STORAGE),s.DummyDebug.on(s.DebugFlags.DEBUG_TIME_LISTENERS)),s.GameInfoService.system(60,1,!0,!0,0).camera(50,.1,1e3).texture("spinner",r(82)).font("default",r(83)).model("intro",r(84)),s.SystemService.init(),s.SystemService.onReady(Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.querySelector("#root"),s.RenderService.init({domElement:t}),s.RenderService.renderView({camera:new S,"views-and-scenes":new m,"actions-and-ui":new d,debugging:new h,"game-objects":new f,persistence:new g,physics:new b}[y]),s.RenderService.run();case 4:case"end":return e.stop()}}),e)}))))}},[[49,1,2]]]);
//# sourceMappingURL=main.c0bdc2d9.chunk.js.map